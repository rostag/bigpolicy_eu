<!-- Usage:
  <app-donations-list title="Given title" [target]="target" [targetType]="targetType" [pageSize]="10" dbQuery="{}"></app-donations-list>
-->
<mat-card>

  <mat-card-title>

    <mat-toolbar class="add-toolbar" color="accent">
      <span *ngIf="title !== ''">{{title}}</span>
      <!-- TODO Усього зроблено внесків: {{donations.length | async}} -->
      <span class="add-fill-remaining"></span>
      {{target.totalDonationsReceived}} UAH
    </mat-toolbar>

  </mat-card-title>

  <mat-card-content>

    <mat-list>
      <ol>
        <!-- <mat-list-item *ngFor="let donation of donations | async"> -->
        <mat-list-item *ngFor="let donation of itemsPage.docs | async | paginate: {
                                                                       id: 'donationItemsPage',
                                                                       itemsPerPage: this.pageSize,
                                                                       currentPage: itemsPage.page,
                                                                       totalItems: itemsPage.total
                                                                     }">
          <li>
            <small>{{donation.description?.substring(0, 15)}} {{donation.dateStarted | date}}, {{donation.status}}
              <span *ngIf="donation.status == 'sandbox'">(){{donation.dateCompleted | date}})</span>
            </small>
            <!-- FIXME Show completeness status {{donation.dateCompleted | date}} -->
            <!-- TODO Add individual donation view <h3 matLine><a [routerLink]="['/donation/' + donation._id]"><b>{{donation.title}}</b></a></h3> -->
            <!-- TODO let admin to delete donation, user to cancel -->
            <!-- <div *ngIf="user.hasEditPermissions(donation)" class="admin" style="min-width:4em;">
             <a [routerLink]="['/donation/' + donation._id + '/edit']"><mat-icon>edit</mat-icon></a>
             <a href (click)="deleteTask(donation)"><mat-icon>delete</mat-icon></a>
            </div> -->
          </li>
        </mat-list-item>
      </ol>
    </mat-list>

    <pagination-controls id="donationItemsPage" (pageChange)="pageChanged($event)" [maxSize]="5" directionLinks="true" autoHide="true">
    </pagination-controls>

    <h3>Усього: {{itemsPage.total}}</h3>

  </mat-card-content>

</mat-card>
